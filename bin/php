#!/bin/bash

PHP_CONTAINER_NAME=chatbot-php

if docker ps --format '{{.Names}}' | grep -q "^$PHP_CONTAINER_NAME\$";  then
docker exec \
    -ti \
    -e APP_ENV=test \
    $PHP_CONTAINER_NAME php $@
else
## execution de PHP de mani√®re autonome (pas besoin d'un environnement de containers)
docker run \
    --init \
    --rm \
    -ti \
    --name "$PHP_CONTAINER_NAME-running-script" \
    -v "$(pwd)/bin/docker/php/php.ini:/usr/local/etc/php/php.ini" \
    -v "$PWD":"$PWD" \
    --user 1000:1000 \
    -w "$PWD" \
    $PHP_CONTAINER_NAME php $@
fi

